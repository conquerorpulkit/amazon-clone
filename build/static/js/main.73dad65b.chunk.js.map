{"version":3,"sources":["StateProvider.js","firebase.js","Header.js","Product.js","Home.js","CheckoutProduct.js","Reducer.js","Subtotal.js","Checkout.js","Login.js","axios.js","Payment.js","Orders.js","App.js","index.js"],"names":["StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","db","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","Header","basket","user","className","to","src","type","length","Product","id","title","image","price","rating","dispatch","Array","fill","map","_","i","alt","onClick","item","Home","CheckoutProduct","getBasketTotal","reduce","amount","state","action","console","log","index","findIndex","basketItem","newBasket","splice","warn","Subtotal","history","useHistory","renderText","decimalScale","displayType","thousandSeparator","prefix","e","push","Checkout","email","Login","useState","setEmail","password","setPassword","onChange","target","preventDefault","signInWithEmailAndPassword","then","catch","error","alert","message","href","class","createUserWithEmailAndPassword","instance","axios","create","baseURL","Payment","stripe","useStripe","elements","useElements","succeeded","setSucceeded","processing","setProcessing","setError","disabled","setDisabled","clientSecret","setClientSecret","useEffect","a","method","url","response","data","getClientSecret","handleSubmit","event","confirmCardPayment","payment_method","card","getElement","CardElement","paymentIntent","collection","doc","uid","set","created","replace","onSubmit","empty","Orders","promise","loadStripe","App","onAuthStateChanged","authUser","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.73dad65b.chunk.js","sourcesContent":["import React, { createContext, useContext, useReducer } from \"react\";\r\n\r\n// Prepare the data layer\r\nexport const StateContext = createContext();\r\n\r\n//wrap our app and provide the data layer\r\nexport const StateProvider = ({ reducer, initialState, children }) => (\r\n    <StateContext.Provider value = {useReducer(reducer, initialState)}>\r\n        {children}\r\n    </StateContext.Provider>\r\n);\r\n\r\n//pull information from the data layer\r\nexport const useStateValue = () => useContext(StateContext);","// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nimport firebase from 'firebase';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyDUtoJiRgObDho5iLvs842gHEB5UyGWdtc\",\r\n    authDomain: \"clone-e4c7d.firebaseapp.com\",\r\n    projectId: \"clone-e4c7d\",\r\n    storageBucket: \"clone-e4c7d.appspot.com\",\r\n    messagingSenderId: \"989184247523\",\r\n    appId: \"1:989184247523:web:41c3048feb8a9275cd67d6\",\r\n    measurementId: \"G-84VN4Z6NZQ\"\r\n  };\r\n\r\n  const firebaseApp = firebase.initializeApp(firebaseConfig);\r\n\r\n  const db = firebaseApp.firestore();\r\n  const auth = firebase.auth();\r\n\r\n  export {db, auth};","import React from \"react\";\r\nimport \"./Header.css\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport ShoppingBasketIcon from \"@material-ui/icons/ShoppingBasket\";\r\nimport { BrowserRouter, Link } from \"react-router-dom\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport { auth } from \"./firebase\";\r\n\r\nfunction Header() {\r\n  const [{ basket, user }, dispatch] = useStateValue();\r\n\r\n  const handleAuthenticaton = () => {\r\n    if (user) {\r\n      auth.signOut();\r\n    }\r\n  }\r\n\r\n  return (\r\n      <BrowserRouter>\r\n    <div className=\"header\">\r\n      <Link to=\"/\">\r\n        <img\r\n          className=\"header__logo\"\r\n          src=\"http://pngimg.com/uploads/amazon/amazon_PNG11.png\"\r\n        />\r\n      </Link>\r\n\r\n      <div className=\"header__search\">\r\n        <input className=\"header__searchInput\" type=\"text\" />\r\n        <SearchIcon className=\"header__searchIcon\" />\r\n      </div>\r\n\r\n      <div className=\"header__nav\">\r\n        {/* <Link to={!user && '/login'}>\r\n          <div onClick={handleAuthenticaton} className=\"header__option\">\r\n            <span className=\"header__optionLineOne\">Hello {!user ? 'Guest' : user.email}</span>\r\n            <span className=\"header__optionLineTwo\">{user ? 'Sign Out' : 'Sign In'}</span>\r\n          </div>\r\n        </Link> */}\r\n\r\n        <Link to='/orders'>\r\n          <div className=\"header__option\">\r\n            <span className=\"header__optionLineOne\">Returns</span>\r\n            <span className=\"header__optionLineTwo\">& Orders</span>\r\n          </div>\r\n        </Link>\r\n        \r\n\r\n        <div className=\"header__option\">\r\n          <span className=\"header__optionLineOne\">Your</span>\r\n          <span className=\"header__optionLineTwo\">Prime</span>\r\n        </div>\r\n\r\n        <Link to=\"/checkout\">\r\n          <div className=\"header__optionBasket\">\r\n            <ShoppingBasketIcon />\r\n            <span className=\"header__optionLineTwo header__basketCount\">\r\n              {basket?.length}\r\n            </span>\r\n          </div>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport \"./Product.css\";\r\nimport { useStateValue } from './StateProvider';\r\n\r\nfunction Product({id,title,image,price,rating}) {\r\n\r\n        const [{ basket }, dispatch] = useStateValue();\r\n\r\n        //console.log(\"This is the basket >>>\" , basket);\r\n\r\n        const addToBasket = () =>{\r\n            // dispach the item into the data layer\r\n            dispatch({\r\n                type: 'ADD_TO_BASKET',\r\n                item: {\r\n                    id: id,\r\n                    title: title,\r\n                    image: image,\r\n                    price: price,\r\n                    rating: rating,\r\n                },\r\n            });\r\n        };\r\n\r\n    return (\r\n        <div className=\"product\">\r\n            <div className=\"product__info\">\r\n                <p>{title}</p>\r\n                <p className='product__price'>\r\n                    <small>$</small>\r\n                    <strong>{price}</strong>\r\n                </p>\r\n                <div className=\"product__rating\">\r\n                    {Array(rating).fill().map((_,i) => (\r\n                        <p>⭐</p>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <img \r\n                src={image}\r\n                alt=\"\"\r\n            />\r\n\r\n            <button onClick={addToBasket}>Add to Basket</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Product\r\n","import React from 'react';\r\nimport \"./Home.css\";\r\nimport Product from './Product';\r\n\r\nfunction Home() {\r\n    return (\r\n        <div className=\"home\">\r\n            <div className=\"home__container\">\r\n                <img \r\n                    className=\"home__image\" \r\n                    src=\"https://images-eu.ssl-images-amazon.com/images/G/02/digital/video/merch2016/Hero/Covid19/Generic/GWBleedingHero_ENG_COVIDUPDATE__XSite_1500x600_PV_en-GB._CB428684220_.jpg\"\r\n                    alt=\"\"\r\n                />\r\n\r\n                <div className=\"home__row\">\r\n                    <Product \r\n                        id=\"1\"\r\n                        title=\"The lean startup\" \r\n                        price={29.99} \r\n                        image=\"https://m.media-amazon.com/images/I/81vvgZqCskL._AC_UY327_FMwebp_QL65_.jpg\" \r\n                        rating={5}\r\n                    />\r\n                    <Product \r\n                        id=\"2\"\r\n                        title=\"HP 15 Entry Level 15.6-inch (39.62 cms) HD Laptop (AMD 3020e/4GB/1TB HDD)\" \r\n                        price={529.99} \r\n                        image=\"https://images-eu.ssl-images-amazon.com/images/I/719F8WdfBzL._AC_UL200_SR200,200_.jpg\" \r\n                        rating={3}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"home__row\">\r\n                    <Product \r\n                        id=\"3\"\r\n                        title=\"Fire TV Stick 4K with Alexa Voice Remote | Stream in 4K resolution\" \r\n                        price={229.99} \r\n                        image=\"https://m.media-amazon.com/images/I/51G8wQVB8hL._SL110_.jpg\" \r\n                        rating={4}\r\n                    />\r\n                    <Product \r\n                        id=\"4\"\r\n                        title=\"xiTix Infrared Thermometer - Digital Thermometer Forehead\" \r\n                        price={49.99} \r\n                        image=\"https://m.media-amazon.com/images/I/417LQhQ0cuL.jpg\" \r\n                        rating={4}\r\n                    />\r\n                    <Product \r\n                        id=\"5\"\r\n                        title=\"GAINX Retro Rectangular Aviator Sunglasses\" \r\n                        price={129.99} \r\n                        image=\"https://images-eu.ssl-images-amazon.com/images/I/71Z%2BnmNrLZL._AC_UL200_SR200,200_.jpg\" \r\n                        rating={3}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"home__row\">\r\n                    <Product \r\n                        id=\"6\"\r\n                        title=\"TP-Link Archer C6 Gigabit MU-MIMO Wireless Router\" \r\n                        price={99.99} \r\n                        image=\"https://images-eu.ssl-images-amazon.com/images/I/51ax8peHlPL._AC_UL200_SR200,200_.jpg\" \r\n                        rating={4}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n","import React from 'react';\r\nimport './CheckoutProduct.css';\r\nimport { useStateValue } from './StateProvider';\r\n\r\nfunction CheckoutProduct({id, image, title, price, rating}) {\r\n    const [{basket}, dispatch] = useStateValue();\r\n\r\n    const removeFromBasket = () => {\r\n        //remove the item from basket\r\n        dispatch({\r\n            type: 'REMOVE_FROM_BASKET',\r\n            id: id,\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className='checkoutProduct'>\r\n            <img className='checkoutProduct__image' src={image} />\r\n\r\n            <div className='checkoutProduct__info'>\r\n                <p className='checkoutProduct__title'>{title}</p>\r\n                <p className='checkoutProduct__price'>\r\n                    <small>$</small>\r\n                    <strong>{price}</strong>\r\n                </p>\r\n                <div className='checkoutProduct__rating'>\r\n                    {Array(rating).fill().map((_,i) => (\r\n                        <p>⭐</p>\r\n                    ))}\r\n                </div>\r\n                <button onClick={removeFromBasket}>Remove from basket</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CheckoutProduct\r\n","export const initialState = {\r\n    basket: [],\r\n    user: null\r\n};\r\n\r\n//Selector\r\nexport const getBasketTotal =(basket) =>\r\n    basket?.reduce((amount, item) => item.price + amount, 0);\r\n\r\n\r\nexport const reducer = (state,action) => {\r\n    console.log(action);\r\n    switch(action.type){\r\n        case 'ADD_TO_BASKET':\r\n            return {\r\n                ...state,\r\n                basket: [...state.basket, action.item]\r\n            };\r\n        \r\n        case 'REMOVE_FROM_BASKET':\r\n            const index = state.basket.findIndex(\r\n                (basketItem) => basketItem.id === action.id\r\n            );\r\n            let newBasket = [...state.basket];\r\n\r\n            if(index>=0){\r\n                newBasket.splice(index, 1);\r\n            }else{\r\n                console.warn(\r\n                    `Can't remove the product(id: ${action.id}) as it's not in the basket!`\r\n                )\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                basket: newBasket\r\n            };\r\n            // return {\r\n            //     ...state,\r\n            //     basket: state.basket.filter(item => item.id !== action.id)\r\n            // };\r\n\r\n            case 'SET_USER':\r\n            return {\r\n                ...state,\r\n                user: action.user\r\n            };\r\n\r\n            case 'EMPTY_BASKET':\r\n            return {\r\n                ...state,\r\n                basket: []\r\n            };\r\n        \r\n        default:\r\n            return state;\r\n\r\n    }\r\n};\r\n\r\nexport default reducer;","import React from 'react';\r\nimport \"./Subtotal.css\";\r\nimport CurrencyFormat from 'react-currency-format';\r\nimport { useStateValue } from './StateProvider';\r\nimport { getBasketTotal } from './Reducer';\r\nimport { useHistory } from 'react-router';\r\n\r\nfunction Subtotal() {\r\n    const history = useHistory();\r\n    const [{basket}, dispatch] = useStateValue();\r\n    //console.log(getBasketTotal(basket));\r\n    return (\r\n        <div className=\"subtotal\">\r\n            <CurrencyFormat\r\n                renderText={(value) => (\r\n                    <>\r\n                        <p>\r\n                            Subtotal ({basket.length} items): \r\n                            <strong>{value}</strong> \r\n                        </p>\r\n                        <small className=\"subtotal__gift\">\r\n                            <input type=\"checkbox\" /> This order contains a gift\r\n                        </small>\r\n                    </>\r\n                )}\r\n                decimalScale={2}\r\n                value={getBasketTotal(basket)}\r\n                displayType={\"text\"}\r\n                thousandSeparator={true}\r\n                prefix={\" $\"}\r\n            />\r\n            <button onClick={e => history.push('/payment')} className=\"subtotal__button\">Proceed to Checkout</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Subtotal;\r\n","import React from 'react';\r\nimport \"./Checkout.css\";\r\nimport CheckoutProduct from './CheckoutProduct';\r\nimport { useStateValue } from './StateProvider';\r\nimport Subtotal from './Subtotal';\r\n\r\nfunction Checkout() {\r\n    const [{basket, user}, dispatch] = useStateValue();\r\n\r\n    return (\r\n        <div className=\"checkout\">\r\n            <div className=\"checkout__left\">\r\n                <img className=\"checkout__ad\" \r\n                    src=\"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg\"\r\n                    alt=\"\" \r\n                />\r\n                <div>\r\n                    <h3>Hello, {user?.email}</h3>\r\n                    <h2 className=\"checkout__title\">Your shopping Basket</h2>\r\n                    {basket.map(item => (\r\n                        <CheckoutProduct \r\n                            id={item.id}\r\n                            title={item.title}\r\n                            image={item.image}\r\n                            price={item.price}\r\n                            rating={item.rating}\r\n                            />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <div className=\"checkout__right\">\r\n                <Subtotal></Subtotal>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Checkout\r\n","import React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport './Login.css';\r\nimport { auth } from './firebase';\r\n\r\nfunction Login() {\r\n    const history = useHistory();\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    const signIn = e => {\r\n        e.preventDefault();\r\n\r\n        //firebase login shit\r\n        auth.signInWithEmailAndPassword(email,password)\r\n        .then(auth =>{\r\n            history.push('/')\r\n        })\r\n        .catch(error => alert(error.message))\r\n    }\r\n\r\n    const register = e => {\r\n        e.preventDefault();\r\n\r\n        //firebase register shit\r\n        auth.createUserWithEmailAndPassword(email,password)\r\n        .then((auth) => {\r\n            console.log(auth);\r\n            if (auth){\r\n                history.push('/')\r\n            }\r\n        })\r\n        .catch(error => alert(error.message))\r\n    }\r\n\r\n    return (\r\n        <div className='login'>\r\n            <Link to='/'>\r\n                <img \r\n                    className='login__logo'\r\n                    src=\"https://whgmgold.com/assets/images/blogs/2020/ama2.png\"\r\n                />\r\n            </Link>\r\n\r\n            <div className='login__container'>\r\n                <h1>Sign-in</h1>\r\n\r\n                <form>\r\n                    <h5>E-mail</h5>\r\n                    <input type='text' value={email} onChange={e => setEmail(e.target.value)}/>\r\n\r\n                    <h5>Password</h5>\r\n                    <input type='password' value={password} onChange={e => setPassword(e.target.value)}/>\r\n                    \r\n                    <button type='submit' onClick={signIn} className=\"login__signInButton\">Sign In</button>\r\n                </form>\r\n\r\n                <p>\r\n                    By continuing, you agree to Amazon's fake <a href=\"/\">Conditions of Use</a> and <a href=\"/\">Privacy Notice</a>.\r\n                </p>\r\n\r\n                <span>&#9656; <a href=\"/\">Need help?</a></span>\r\n\r\n            </div>\r\n            <div>\r\n                <div class=\"separator\">New to Amazon?</div>\r\n            </div>\r\n            \r\n\r\n            <button onClick={register} className=\"login__registerButton\">Create your Amazon account</button>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'http://localhost:5001/clone-e4c7d/us-central1/api' //API URL\r\n});\r\n\r\nexport default instance;","import React, { useState, useEffect } from 'react';\r\nimport './Payment.css';\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport CheckoutProduct from \"./CheckoutProduct\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\nimport CurrencyFormat from \"react-currency-format\";\r\nimport { getBasketTotal } from \"./Reducer\";\r\nimport axios from './axios';\r\nimport { db } from \"./firebase\";\r\n\r\nfunction Payment() {\r\n    const [{ basket, user }, dispatch] = useStateValue();\r\n    const history = useHistory();\r\n\r\n    const stripe = useStripe();\r\n    const elements = useElements();\r\n\r\n    const [succeeded, setSucceeded] = useState(false);\r\n    const [processing, setProcessing] = useState(\"\");\r\n    const [error, setError] = useState(null);\r\n    const [disabled, setDisabled] = useState(true);\r\n    const [clientSecret, setClientSecret] = useState(true);\r\n\r\n    useEffect(() => {\r\n        // generate the special stripe secret which allows us to charge a customer\r\n        const getClientSecret = async () => {\r\n            const response = await axios({\r\n                method: 'post',\r\n                // Stripe expects the total in a currencies subunits\r\n                url: `/payments/create?total=${getBasketTotal(basket) * 100}`\r\n            });\r\n            setClientSecret(response.data.clientSecret)\r\n        }\r\n\r\n        getClientSecret();\r\n    }, [basket])\r\n\r\n    console.log('THE SECRET IS >>>', clientSecret)\r\n    console.log('👱', user)\r\n\r\n    const handleSubmit = async (event) => {\r\n        // do all the fancy stripe stuff...\r\n        event.preventDefault();\r\n        setProcessing(true);\r\n\r\n        const payload = await stripe.confirmCardPayment(clientSecret, {\r\n            payment_method: {\r\n                card: elements.getElement(CardElement)\r\n            }\r\n        }).then(({ paymentIntent }) => {\r\n            // paymentIntent = payment confirmation\r\n\r\n            db\r\n              .collection('users')\r\n              .doc(user?.uid)\r\n              .collection('orders')\r\n              .doc(paymentIntent.id)\r\n              .set({\r\n                  basket: basket,\r\n                  amount: paymentIntent.amount,\r\n                  created: paymentIntent.created\r\n              })\r\n\r\n            setSucceeded(true);\r\n            setError(null)\r\n            setProcessing(false)\r\n\r\n            dispatch({\r\n                type: 'EMPTY_BASKET'\r\n            })\r\n\r\n            history.replace('/orders')\r\n        })\r\n\r\n    }\r\n\r\n    const handleChange = event => {\r\n        // Listen for changes in the CardElement\r\n        // and display any errors as the customer types their card details\r\n        setDisabled(event.empty);\r\n        setError(event.error ? event.error.message : \"\");\r\n    }\r\n\r\n    return (\r\n        <div className='payment'>\r\n            <div className='payment__container'>\r\n                <h1>\r\n                    Checkout (\r\n                        <Link to=\"/checkout\">{basket?.length} items</Link>\r\n                        )\r\n                </h1>\r\n\r\n\r\n                {/* Payment section - delivery address */}\r\n                <div className='payment__section'>\r\n                    <div className='payment__title'>\r\n                        <h3>Delivery Address</h3>\r\n                    </div>\r\n                    <div className='payment__address'>\r\n                        <p>{user?.email}</p>\r\n                        <p>123 React Lane</p>\r\n                        <p>Los Angeles, CA</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Payment section - Review Items */}\r\n                <div className='payment__section'>\r\n                    <div className='payment__title'>\r\n                        <h3>Review items and delivery</h3>\r\n                    </div>\r\n                    <div className='payment__items'>\r\n                        {basket.map(item => (\r\n                            <CheckoutProduct\r\n                                id={item.id}\r\n                                title={item.title}\r\n                                image={item.image}\r\n                                price={item.price}\r\n                                rating={item.rating}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            \r\n\r\n                {/* Payment section - Payment method */}\r\n                <div className='payment__section'>\r\n                    <div className=\"payment__title\">\r\n                        <h3>Payment Method</h3>\r\n                    </div>\r\n                    <div className=\"payment__details\">\r\n                            {/* Stripe magic will go */}\r\n\r\n                            <form onSubmit={handleSubmit}>\r\n                                <CardElement onChange={handleChange}/>\r\n\r\n                                <div className='payment__priceContainer'>\r\n                                    <CurrencyFormat\r\n                                        renderText={(value) => (\r\n                                            <h3>Order Total: {value}</h3>\r\n                                        )}\r\n                                        decimalScale={2}\r\n                                        value={getBasketTotal(basket)}\r\n                                        displayType={\"text\"}\r\n                                        thousandSeparator={true}\r\n                                        prefix={\"$\"}\r\n                                    />\r\n                                    <button disabled={processing || disabled || succeeded}>\r\n                                        <span>{processing ? <p>Processing</p> : \"Buy Now\"}</span>\r\n                                    </button>\r\n                                </div>\r\n\r\n                                  {/* Errors */}\r\n                                {error && <div>{error}</div>}\r\n                            </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Payment\r\n","import React from 'react';\r\nimport './Orders.css';\r\n\r\nfunction Orders() {\r\n    return (\r\n        <div className='Orders'>\r\n            <h1>Your Order's</h1>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Orders\r\n","\nimport { BrowserRouter as Router, Switch, Route} from \"react-router-dom\";\nimport './App.css';\nimport Header from './Header';\nimport Home from './Home';\nimport Checkout from './Checkout';\nimport Login from './Login';\nimport { auth } from './firebase';\nimport { useStateValue } from \"./StateProvider\";\nimport { useEffect } from \"react\";\nimport Payment from \"./Payment\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport Orders from'./Orders';\nimport './Orders.css';\nconst promise = loadStripe(\"pk_test_51Ip4R4SI3lNxdGLgRQbq9uMgm78ftCYixNmrQeL5pSTwzfjrly65H0fWRAdipXTobCx9XNB66BuTj8QhWQS4SqbB00lsaJmMfY\");\n\n\nfunction App() {\n\n  const [{}, dispatch] = useStateValue();\n\n\n  useEffect(() => {\n    //will only run once when the app component loads\n    auth.onAuthStateChanged(authUser =>{\n      console.log('THE USER IS >>> ',authUser);\n\n      if(authUser) {\n        //the user just logged in / the user was logged in\n        dispatch({\n          type: 'SET_USER',\n          user: authUser\n        })\n\n      } else {\n        //the user is logged out\n        dispatch({\n          type: 'SET_USER',\n          user: null\n        })\n      }\n    })\n  }, [])\n\n  return (\n    //BEM\n    <Router>\n      <div className=\"app\">\n        <Switch>\n          \n          <Route path=\"/login\">\n            <Login />\n          </Route>\n          <Route path=\"/orders\">\n            <Header />\n            <Orders />\n          </Route>\n          <Route path=\"/checkout\">\n            <Header />\n            <Checkout />\n          </Route>\n          < Route path=\"/payment\">\n            <Header />\n            <Elements stripe={promise}>\n              <Payment/>\n            </Elements>\n          </Route>\n          <Route path=\"/\">\n            <Header />\n            <Home />\n          </Route>\n\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { StateProvider } from './StateProvider';\nimport reducer, { initialState } from './Reducer';\n\nReactDOM.render(\n  <React.StrictMode>\n    <StateProvider initialState={initialState} reducer={reducer}>\n      <App />\n    </StateProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}